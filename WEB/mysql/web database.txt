CREATE TABLE USERS(
     username VARCHAR(25) UNIQUE NOT NULL,
	 password VARCHAR(25) NOT NULL,
	 profile ENUM('civilian','administrator','volunteer') NOT NULL,
	 PRIMARY KEY(username)
	 );
     
CREATE TABLE CIVILIAN(
     civilian_user VARCHAR(25) UNIQUE NOT NULL,
	 full_name VARCHAR(25) NOT NULL,
	 phone CHAR(10) NOT NULL,
	 latitude DECIMAL(10, 8),
     longitude DECIMAL(11, 8),
	 PRIMARY KEY(civilian_user),
	 CONSTRAINT CIVILIANUSER FOREIGN KEY(civilian_user) REFERENCES USERS(username)
	 ON DELETE CASCADE ON UPDATE CASCADE
     );

CREATE TABLE PRODUCTS(
	product_id INT(9) NOT NULL UNIQUE AUTO_INCREMENT,
	category VARCHAR(25) NOT NULL,
	item VARCHAR(25) NOT NULL,
	description LONGTEXT NOT NULL,
	available INT(9) NOT NULL,
	PRIMARY KEY(product_id)
	)AUTO_INCREMENT=1000; 

CREATE TABLE INQUIRY(
	 inquiry_id INT(9) NOT NULL UNIQUE AUTO_INCREMENT,
	 inquiry_status ENUM('approved', 'finished', 'disapproved', 'cancelled') NOT NULL,
	 inquiry_date TIMESTAMP DEFAULT NOW(),
	 inquiry_user VARCHAR(25) UNIQUE NOT NULL,
	 inquiry_product INT(9) NOT NULL,
	 inquiry_quantity INT(9) NOT NULL,
	 PRIMARY KEY(inquiry_id, inquiry_user),
	 CONSTRAINT INQUIRYUSER FOREIGN KEY(inquiry_user) REFERENCES CIVILIAN(civilian_user)
	 ON DELETE CASCADE ON UPDATE CASCADE,
	 CONSTRAINT PRODUCT_INQUIRY FOREIGN KEY(inquiry_product) REFERENCES PRODUCTS(product_id)
	 ON DELETE CASCADE ON UPDATE CASCADE
	 )AUTO_INCREMENT=0001;
  
 CREATE TABLE OFFERS(
	offer_id INT(9) NOT NULL UNIQUE AUTO_INCREMENT,
	offer_status ENUM('approved', 'finished', 'disapproved', 'cancelled') NOT NULL,
	offer_date TIMESTAMP DEFAULT NOW(),
	offer_user VARCHAR(25) UNIQUE NOT NULL,
	offer_product INT(9) NOT NULL,
	offer_quantity INT(9) NOT NULL,
	PRIMARY KEY(offer_id, offer_user),
	CONSTRAINT OFFERUSER FOREIGN KEY(offer_user) REFERENCES CIVILIAN(civilian_user)
	ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT PRODUCT_OFFER FOREIGN KEY(offer_product) REFERENCES PRODUCTS(product_id)
	ON DELETE CASCADE ON UPDATE CASCADE
	)AUTO_INCREMENT=2000;
	


CREATE TABLE VOLUNTEER(
    volunteer_user VARCHAR(25) UNIQUE NOT NULL,
    vehicle VARCHAR(25) UNIQUE NOT NULL,
	PRIMARY KEY(volunteer_user),
	CONSTRAINT VOLUNTEERUSER FOREIGN KEY(volunteer_user) REFERENCES USERS(username)
	ON DELETE CASCADE ON UPDATE CASCADE
);
	 
CREATE TABLE VEHICLE(
	vehicle_id VARCHAR(25) NOT NULL,
	vehicle_inquiry_id INT(9) NOT NULL,
	vehicle_offer_id INT(9) NOT NULL,
	latitude_vehicle DECIMAL(10, 8),
    longitude_vehicle DECIMAL(11, 8),
	PRIMARY KEY(vehicle_id),
	CONSTRAINT VEHICLE FOREIGN KEY(vehicle_id) REFERENCES VOLUNTEER(vehicle)
	ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT VOLUNTEERINQUIRY FOREIGN KEY(vehicle_inquiry_id) REFERENCES INQUIRY(inquiry_id)
	ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT VOLUNTEEROFFER FOREIGN KEY(vehicle_offer_id) REFERENCES OFFERS(offer_id)
	ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE ADMIN(
      admin_user VARCHAR(25) UNIQUE NOT NULL,
	base_location VARCHAR(25), 
	PRIMARY KEY(admin_user),
	CONSTRAINT ADMINUSER FOREIGN KEY(admin_user) REFERENCES USERS(username)
	ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE ANNOUNCEMENTS(
    announce_id INT(9) NOT NULL UNIQUE AUTO_INCREMENT,
	announce_product INT(9) NOT NULL,
	announce_quantity INT(9) NOT NULL,
	PRIMARY KEY(announce_id),
	CONSTRAINT ANNOUNCE_OFFER FOREIGN KEY(announce_product) REFERENCES OFFERS(offer_product)
	ON DELETE CASCADE ON UPDATE CASCADE
	)AUTO_INCREMENT=3000;



	

INSERT INTO PRODUCTS (category, item, description, available) 
VALUES
('Beverages','water', 'zagori', 5),
('Beverages', 'juice', 'orange', 5),
('Babies Stuff','bottle', 'for milk', 8),
('First Aid','bandage', 'small', 10);
('Groceries'),
('Sanitaries'),
('Children Toy'),
('Clothing'),
('Personal Hygiene'),
('Others');

INSERT INTO USER VALUES
('mariakouri','12345678', 'volunteer'),
('chryssapateli','abcdefgh', 'volunteer'),
('miltosmades', '00000000', 'civilian'),
('babissougias', '10111213', 'civilian'),
('aimilia1','1111111111','volunteer'),
('admin', 'admin', 'administrator');

INSERT INTO VOLUNTEER VALUES
('mariakouri', 'ST1529'),
('chryssapateli', 'AB1001'),
('aimilia1','BO2222');


INSERT INTO CIVILIAN VALUES
('miltosmades', 'MILTIADIS MANTES', '1234567890', 38.24025570, 21.72685160),
('babissougias', 'BABIS SOUGIAS', '0987654321', 38.24025570, 21.72685160);

INSERT INTO INQUIRY (inquiry_status, inquiry_user, inquiry_product, inquiry_quantity) VALUES
('approved', 'babissougias', 1000, 3),
('finished', 'miltosmades', 1002, 5);

INSERT INTO OFFERS (offer_status, offer_user, offer_product, offer_quantity) VALUES
('approved', 'babissougias', 1001, 4),
('finished', 'miltosmades', 1003, 3);


INSERT INTO VEHICLE VALUES
('ST1529', 0001, 2004, 38.24025570,21.72685160),
('AB1001', 0002, 2005, 38.24025570, 21.72685160),
('AC001', 0002, 2005, 38.24025579, 21.72685169),
('BO2222', 0001, 2004, 39.24025570,20.72685160);
